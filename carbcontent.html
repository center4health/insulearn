<!DOCTYPE html>
<html lang="en">

<head>
  <title>Visual Diabetes Learning</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://kit.fontawesome.com/008a24505e.js" crossorigin="anonymous"></script>
</head>
<style>
  #learn {
    color: black;
    background-color: white;
    border-color: #c4c4c4;
  }

  #learn:hover {
    color: black;
    background-color: #ededed;
    /*dark green*/
    border-color: #ededed;
    /*dark green*/
  }

  .footer {
    position: fixed;
    padding-top: 25px;
    padding-bottom: 25px;
    left: 0;
    bottom: 0;
    width: 100%;
    background-color: #41948E;
    /*emerald green*/
    color: white;
    text-align: center;
  }
</style>

<body>
  <div id="overlay"></div>

  <!--Fixed Navigation Bar-->
  <nav class="navbar navbar-default navbar-fixed-top" id="header">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
          data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><b>Diabetes Learning</b></a>
      </div>

      <!-- Links to home, interactive graphs, terminology, and about -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="graphs-menu.html">Learning Tools</a></li>
          <li><a href="terminology.html">Glosssary</a></li>
          <li><a href="about.html">About</a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

  <!-- The side menu that is invisible at first-->
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" id="close" onclick="closeNav()"><i class="fas fa-times"></i></a>
    <a href="javascript:void(0)" id="grid"><i class="fas fa-th-large"></i></a>

    <!-- The text at the top of the sidebar -->
    <div class="container">
      <h1>
        Welcome to Learn Diabetes!
      </h1>
      <p>Here, you will learn the basics of diabetes.</br> Select a topic below.</p>
    </div>
    <div class="container-fluid" id="topics">
      <div id="carbs">
        <div class="col-md-12">
          <h1>Topic 1: Simple Carbohydrates (carbs)</h1>
        </div>


        <div class="row">
          <div class="col-md-1">
            <img src="/img/left.png" class="hidden" id="previous">
          </div>

          <div class="col-md-4">
            <button class="scenario" onclick="{ window.location = 'carbcontent.html'; }"><img
                src="/img/carbcontent.png">
              <p>Simple Carbs</p>
            </button>
          </div>

          <div class="col-md-4">
            <button class="scenario" onclick="{ window.location = 'carbamount.html'; }"><img src="/img/carbamount.png">
              <p>Carb Counting</p>
            </button>
          </div>
          <div class="col-md-1">
            <img src="/img/right.png" class="align-middle" id="next">
          </div>
        </div>
      </div>
      <div id="insulin" class="hidden">
        <div class="row">
          <div class="col-md-12">
            <h1>Topic 2: Bolus</h1>
          </div>

          <div class="col-md-1">
            <img src="/img/left.png" id="previous2">
          </div>
          <div class="col-md-3">
            <button class="scenario" onclick="{ window.location = 'bolus_too_early.html'; }"><img
                src="/img/bolustime.png">
              <p>Insulin Timing</p>
            </button>
          </div>
          <div class="col-md-3">
            <button class="scenario" onclick="{ window.location = '/bolus_too_little.html'; }"><img
                src="/img/bolusdose.png">
              <p>Insulin Dosing</p>
            </button>
          </div>
          <div class="col-md-3">
            <button class="scenario" onclick="{ window.location = '/bolus_too_much.html'; }"><img
                src="/img/bolustime&dose.png">
              <p>Insulin Timing and Dosing</p>
            </button>
          </div>
          <div class="col-md-1">
            <img src="/img/right.png" class="hidden" id="next2">
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="handle" onclick="openNav()">
    <i class="fas fa-bars"></i>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-9">
        <div id="chart">

        </div>
        <div class="row" id="foods">
          <div class="col-xs-2 padding-0">
            <button id="juice" class="foodBtn"></button>
          </div>
          <div class="col-xs-2 padding-0">
            <button id="chocolate" class="foodBtn"></button>
          </div>
          <div class="col-xs-2 padding-0">
            <button id="candy" class="foodBtn"></button>
          </div>
          <div class="col-xs-2 padding-0">
            <button id="croissant" class="foodBtn"></button>
          </div>
          <!-- <div class="col-md-1 padding-0">
            <button><img src="/img/Grapes.png" class="img-responsive">
          </div> -->
          <div class="col-xs-2 padding-0">
            <button id="lettuce" class="foodBtn"></button>
          </div>
          <div class="col-xs-2 padding-0">
            <button id="cheese" class="foodBtn"></button>

          </div>
        </div>
      </div>

      <div class="col-md-3">
        <div id="info">
          <h1>Simple Carbohydrates</h1>
          <div id="infodetails">
            <p>Itâ€™s lunch time and your blood sugar is trending low.</P>
            <p>You decide to eat something to treat the low.</p>
            <p><b>Select</b> different foods to see how they affect the CGM graph.</p>
          </div>
        </div>
      </div>

    </div>
  </div>





  <!-- Footer -->
  <!-- <footer class="footer">
    <div class="row">
      <div class="col-sm-6" style="padding-top: 5px; margin-bottom: 10px">
        <a href="http://ddi.ucsd.edu" target="_blank"><img src="img/ddi-logo.png"
            style="max-width: 150px; margin-right: 50px"></a>
        <a href="https://designlab.ucsd.edu" target="_blank"><img src="img/dlab-logo.png" style="max-width: 150px"></a>
      </div>
      <div class="col-sm-6"
        style="font-size: 12px; color: black; margin-top: 5px;padding-right: 100px; text-align: left; padding-left: 100px">
        <b>Note</b>: The information on this site is not intended or implied to be a
        substitute for professional medical advice, diagnosis or treatment.
        All content, including text, graphics, images and information,
        contained on or available through this website is for general
        information purposes only.</p>
      </div>
    </div>
  </footer> -->
</body>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="dwn.js"></script>
<script>
  // function to add shadow to the navbar
  $(window).scroll(function () {
    var scroll = $(window).scrollTop();
    if (scroll > 0) {
      $("#header").addClass("active");
    }
    else {
      $("#header").removeClass("active");
    }
  });

  //function for side bar
  function openNav() {
    document.getElementById("overlay").style.display = "block";
    document.getElementById("mySidenav").style.width = "80%";
  }

  function closeNav() {
    document.getElementById("overlay").style.display = "none";
    document.getElementById("mySidenav").style.width = "0";
  }

  $(document).ready(function () {
    $("#next").click(function () {
      $("#carbs").addClass("hidden");
      $("#insulin").removeClass("hidden");
    });
    $("#previous2").click(function () {
      $("#carbs").removeClass("hidden");
      $("#insulin").addClass("hidden");
    });


  });


  let timeParse = d3.timeParse("%H:%M:%S")
  let mintime = timeParse("11:00:00");
  let model = new Model(mintime, timeParse("14:30:00"));
  let chart = new Chart("#chart", model, 250);
  chart.drawTargetRange([70, 180]);

  let hiddeninsulin = new Insulin(14, timeParse("10:00:00"), INSULIN_TYPE.RAPID, "secret");
  model.addFactor(hiddeninsulin);

  chart.drawBG(model);



  let meals = {
    "Juice": {
      button: "#juice",
      amount: 40,
      type: MEAL_COMPONENTS.FAST_CARB,
      icon: "/img/Applejuice.png",
      impact: "Fast Acting, Simple Carb",
      color: "#9CD9B5",
      sugar: "High Sugar",
      spike: "Quick spike 15 -30 mins"
    },
    "Chocolate": {
      button: "#chocolate",
      amount: 40,
      type: MEAL_COMPONENTS.SIMPLE_CARB,
      icon: "/img/Chocolate.png",
      impact: "Carb Type May Vary",
      color: "#FFF386",
      sugar: "High fat, sometimes high fiber",
      spike: "Very slow rise with a delayed drop"
    },
    "Candy": {
      button: "#candy",
      amount: 36,
      type: MEAL_COMPONENTS.FAST_CARB,
      icon: "/img/Candy.png",
      impact: "Fast Acting, Simple Carb",
      color: "#9CD9B5",
      sugar: "High Sugar",
      spike: "Quick spike 15 -30 mins"
    },
    "Croissant": {
      button: "#croissant",
      amount: 50,
      type: MEAL_COMPONENTS.COMPLEX_CARB,
      icon: "/img/Croissant.png",
      impact: "Not Fast Acting, Simple Carb",
      color: "#E49C9D",
      sugar: "High Fat",
      spike: "Very slow rise: 30+ mins"
    },
    "Cheese": {
      button: "#cheese",
      amount: 30,
      type: MEAL_COMPONENTS.FATTY_CARB,
      icon: "/img/Cheese.png",
      impact: "Not Fast Acting, Simple Carb",
      color: "#E49C9D",
      sugar: "High Fat and protein",
      spike: "Slight rise with delayed effects in a couple hours"
    },
    "Lettuce": {
      button: "#lettuce",
      amount: 5,
      type: MEAL_COMPONENTS.COMPLEX_CARB,
      icon: "/img/Lettuce.png",
      impact: "Not Fast Acting, Simple Carb",
      color: "#E49C9D",
      sugar: "Low carbs",
      spike: "Blood sugar will continue to drop"
    },
  }
  COLOR_ACTIVE = "#050941";
  COLOR_PASSIVE = "white";
  function setBackground(button, color, icon) {
    $(button).css("background", `url(${icon}`);
    $(button).css("background-repeat", "no-repeat");
    $(button).css("background-position", "center");
    $(button).css("background-color", color);

  }

  function pick_meal(name) {
    if (meal) {
      model.removeFactor(meal);
      chart.removeFactor(meal);
    }
    setBackground(meals[cur_meal].button, COLOR_PASSIVE, meals[cur_meal].icon);
    cur_meal = name;
    setBackground(meals[name].button, COLOR_ACTIVE, meals[name].icon);
    meal = new Meal(meals[name].amount, meal_time, meals[name].type, name);
    meal.displayoptions.yhandle = false;
    meal.displayoptions.xhandle = false;
    meal.displayoptions.icon = meals[name].icon;
    model.addFactor(meal);
    chart.drawMeal(meal);
    chart.drawBG(model);
    chart.drawToolTip(meals[name].impact, meals[name].color, meals[name].sugar, meals[name].spike);
  }

  let meal_time = d3.timeMinute.offset(mintime, 30);
  var meal;
  let cur_meal = "Juice";
  pick_meal(cur_meal);


  $(document).ready(function () {
    for (const [name, food] of Object.entries(meals)) {
      $(food.button).click(
        function () {
          pick_meal(name);
        });
      if (name == cur_meal) {
        setBackground(food.button, COLOR_ACTIVE, food.icon);
      } else {
        setBackground(food.button, COLOR_PASSIVE, food.icon);
      }

    }
  });


  $('#learn').on('click', function () { window.location = 'terminology.html'; });
  $('#seeworks').on('click', function () { openNav(); });
</script>

</html>